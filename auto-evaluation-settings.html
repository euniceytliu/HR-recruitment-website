<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªåŠ¨è¯„ä¼°è®¾ç½® - æ¡ˆä¾‹ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .card h2 {
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .switch-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: #f7fafc;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .switch-label {
            flex: 1;
        }

        .switch-label h3 {
            color: #2d3748;
            margin-bottom: 5px;
        }

        .switch-label p {
            color: #718096;
            font-size: 0.9em;
        }

        .switch {
            position: relative;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #cbd5e0;
            transition: .4s;
            border-radius: 30px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #48bb78;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .setting-item {
            margin-bottom: 20px;
        }

        .setting-item label {
            display: block;
            color: #4a5568;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .setting-item input[type="number"],
        .setting-item input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1em;
        }

        .setting-item input[type="checkbox"] {
            margin-right: 8px;
        }

        .info-box {
            background: #ebf8ff;
            border-left: 4px solid #4299e1;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }

        .warning-box {
            background: #fffaf0;
            border-left: 4px solid #ed8936;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }

        .success-box {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }

        .btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .status-enabled {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-disabled {
            background: #fed7d7;
            color: #742a2a;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš™ï¸ è‡ªåŠ¨è¯„ä¼°è®¾ç½®</h1>
            <p style="color: #718096;">æ§åˆ¶æ¡ˆä¾‹æäº¤åæ˜¯å¦è‡ªåŠ¨è§¦å‘AIè¯„ä¼°</p>
        </div>

        <!-- ä¸»å¼€å…³ -->
        <div class="card">
            <h2>ğŸ¯ ä¸»å¼€å…³</h2>
            <div class="switch-container">
                <div class="switch-label">
                    <h3>å¯ç”¨è‡ªåŠ¨è¯„ä¼°</h3>
                    <p>å¼€å¯åï¼Œç¬¦åˆæ¡ä»¶çš„æ¡ˆä¾‹å°†åœ¨æäº¤åè‡ªåŠ¨è¿›è¡ŒAIè¯„ä¼°</p>
                </div>
                <label class="switch">
                    <input type="checkbox" id="enabledSwitch" onchange="toggleAutoEvaluation()">
                    <span class="slider"></span>
                </label>
            </div>

            <div id="statusBox"></div>

            <div class="warning-box">
                <strong>âš ï¸ æˆæœ¬æç¤º</strong><br>
                å¼€å¯è‡ªåŠ¨è¯„ä¼°åï¼Œæ¯ä¸ªç¬¦åˆæ¡ä»¶çš„æäº¤éƒ½ä¼šè°ƒç”¨AI APIï¼ˆçº¦ï¿¥0.01-0.02/æ¬¡ï¼‰ã€‚<br>
                å»ºè®®ï¼šå…ˆå¼€å¯å‰ç½®æ£€æŸ¥ï¼Œè¿‡æ»¤æ‰ä½è´¨é‡æäº¤ï¼Œå‡å°‘ä¸å¿…è¦çš„è´¹ç”¨ã€‚
            </div>
        </div>

        <!-- å‰ç½®æ£€æŸ¥ -->
        <div class="card">
            <h2>ğŸ” å‰ç½®æ£€æŸ¥è§„åˆ™</h2>
            <p style="color: #718096; margin-bottom: 20px;">åªæœ‰é€šè¿‡è¿™äº›æ£€æŸ¥çš„æ¡ˆä¾‹æ‰ä¼šè§¦å‘è‡ªåŠ¨è¯„ä¼°ï¼ˆå…è´¹æ£€æŸ¥ï¼‰</p>

            <div class="setting-item">
                <label>äº§å“é“¾æ¥æœ€å°é•¿åº¦</label>
                <input type="number" id="minUrlLength" value="20" min="10" max="100">
            </div>

            <div class="setting-item">
                <label>AIæç¤ºè¯æœ€å°å­—æ•°</label>
                <input type="number" id="minPromptsLength" value="100" min="50" max="500">
            </div>

            <div class="setting-item">
                <label>äº§å“è¯´æ˜æœ€å°å­—æ•°</label>
                <input type="number" id="minSummaryLength" value="200" min="100" max="1000">
            </div>

            <div class="setting-item">
                <label>
                    <input type="checkbox" id="requireVideo">
                    å¿…é¡»æä¾›æ¼”ç¤ºè§†é¢‘
                </label>
            </div>

            <div class="setting-item">
                <label>
                    <input type="checkbox" id="requireDocument">
                    å¿…é¡»æäº¤è¯´æ˜æ–‡æ¡£
                </label>
            </div>

            <div class="setting-item">
                <label>é»‘åå•å…³é”®è¯ï¼ˆé€—å·åˆ†éš”ï¼‰</label>
                <input type="text" id="blacklistKeywords" value="test,æµ‹è¯•,demo,ç¤ºä¾‹" 
                       placeholder="ä¾‹å¦‚: test,æµ‹è¯•,demo">
            </div>

            <div class="info-box">
                <strong>ğŸ’¡ å»ºè®®è®¾ç½®</strong><br>
                â€¢ æç¤ºè¯ â‰¥ 300å­—ï¼šç¡®ä¿å­¦ç”Ÿè®¤çœŸå¡«å†™AIäº¤äº’è¿‡ç¨‹<br>
                â€¢ äº§å“è¯´æ˜ â‰¥ 500å­—ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„è¯„ä¼°ä¾æ®<br>
                â€¢ å¯ç”¨é»‘åå•ï¼šè¿‡æ»¤æµ‹è¯•æäº¤
            </div>
        </div>

        <!-- è¯„ä¼°ç­–ç•¥ -->
        <div class="card">
            <h2>ğŸ¤– è¯„ä¼°ç­–ç•¥</h2>

            <div class="setting-item">
                <label>è¯„ä¼°å»¶è¿Ÿï¼ˆç§’ï¼‰</label>
                <input type="number" id="delaySeconds" value="5" min="0" max="60">
                <small style="color: #718096;">æäº¤åå»¶è¿Ÿè¯„ä¼°ï¼Œé˜²æ­¢ç”¨æˆ·é‡å¤æäº¤</small>
            </div>

            <div class="setting-item">
                <label>å¤±è´¥é‡è¯•æ¬¡æ•°</label>
                <input type="number" id="maxRetries" value="2" min="0" max="5">
            </div>

            <div class="setting-item">
                <label>é‡è¯•é—´éš”ï¼ˆç§’ï¼‰</label>
                <input type="number" id="retryIntervalSeconds" value="3" min="1" max="10">
            </div>
        </div>

        <!-- ä¿å­˜æŒ‰é’® -->
        <div class="card">
            <button class="btn" onclick="saveSettings()">ğŸ’¾ ä¿å­˜è®¾ç½®</button>
            <button class="btn" style="background: #718096; margin-left: 10px;" onclick="resetSettings()">
                ğŸ”„ æ¢å¤é»˜è®¤
            </button>
        </div>

        <!-- ä½¿ç”¨è¯´æ˜ -->
        <div class="card">
            <h2>ğŸ“– ä½¿ç”¨è¯´æ˜</h2>
            
            <h3 style="margin-top: 20px;">æ–¹æ¡ˆå¯¹æ¯”</h3>
            <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                <tr style="background: #f7fafc;">
                    <th style="padding: 10px; text-align: left; border: 1px solid #e2e8f0;">æ–¹æ¡ˆ</th>
                    <th style="padding: 10px; text-align: left; border: 1px solid #e2e8f0;">ä¼˜ç‚¹</th>
                    <th style="padding: 10px; text-align: left; border: 1px solid #e2e8f0;">ç¼ºç‚¹</th>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>æ‰‹åŠ¨è¯„ä¼°</strong>ï¼ˆæ¨èï¼‰</td>
                    <td style="padding: 10px; border: 1px solid #e2e8f0;">
                        â€¢ èŠ‚çœæˆæœ¬<br>
                        â€¢ è´¨é‡å¯æ§<br>
                        â€¢ å¯é‡è¯„
                    </td>
                    <td style="padding: 10px; border: 1px solid #e2e8f0;">
                        â€¢ éœ€äººå·¥æ“ä½œ
                    </td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #e2e8f0;"><strong>è‡ªåŠ¨è¯„ä¼°</strong></td>
                    <td style="padding: 10px; border: 1px solid #e2e8f0;">
                        â€¢ å…¨è‡ªåŠ¨<br>
                        â€¢ å®æ—¶åé¦ˆ<br>
                        â€¢ ä½“éªŒå¥½
                    </td>
                    <td style="padding: 10px; border: 1px solid #e2e8f0;">
                        â€¢ æˆæœ¬è¾ƒé«˜<br>
                        â€¢ å¯èƒ½è¢«æ»¥ç”¨
                    </td>
                </tr>
            </table>

            <h3 style="margin-top: 20px;">æ¨èé…ç½®</h3>
            <div class="success-box">
                <strong>ğŸ’¡ æ··åˆæ–¹æ¡ˆï¼ˆæ¨èï¼‰</strong><br>
                1. <strong>å…³é—­è‡ªåŠ¨è¯„ä¼°</strong>ï¼ˆé»˜è®¤ï¼‰<br>
                2. <strong>ä½¿ç”¨æ‰‹åŠ¨è¯„ä¼°é¡µé¢</strong>æ‰¹é‡å¤„ç†<br>
                3. <strong>åªåœ¨æ‹›è˜é«˜å³°æœŸ</strong>çŸ­æš‚å¼€å¯è‡ªåŠ¨è¯„ä¼°<br>
                4. <strong>è®¾ç½®ä¸¥æ ¼çš„å‰ç½®æ£€æŸ¥</strong>è¿‡æ»¤ä½è´¨é‡æäº¤
            </div>
        </div>
    </div>

    <script src="auto-evaluation-config.js"></script>
    <script>
        // é¡µé¢åŠ è½½æ—¶è¯»å–é…ç½®
        window.onload = function() {
            loadSettings();
            updateStatus();
        };

        // åŠ è½½è®¾ç½®
        function loadSettings() {
            const config = AUTO_EVALUATION_CONFIG;

            // ä¸»å¼€å…³
            document.getElementById('enabledSwitch').checked = config.enabled;

            // å‰ç½®æ£€æŸ¥
            document.getElementById('minUrlLength').value = config.preChecks.minUrlLength;
            document.getElementById('minPromptsLength').value = config.preChecks.minPromptsLength;
            document.getElementById('minSummaryLength').value = config.preChecks.minSummaryLength;
            document.getElementById('requireVideo').checked = config.preChecks.requireVideo;
            document.getElementById('requireDocument').checked = config.preChecks.requireDocument;
            document.getElementById('blacklistKeywords').value = config.preChecks.blacklistKeywords.join(',');

            // è¯„ä¼°ç­–ç•¥
            document.getElementById('delaySeconds').value = config.strategy.delaySeconds;
            document.getElementById('maxRetries').value = config.strategy.maxRetries;
            document.getElementById('retryIntervalSeconds').value = config.strategy.retryIntervalSeconds;
        }

        // åˆ‡æ¢è‡ªåŠ¨è¯„ä¼°
        function toggleAutoEvaluation() {
            const enabled = document.getElementById('enabledSwitch').checked;
            AUTO_EVALUATION_CONFIG.enabled = enabled;
            updateStatus();
            
            // ä¿å­˜åˆ° localStorage
            localStorage.setItem('autoEvaluationEnabled', enabled);
        }

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus() {
            const enabled = AUTO_EVALUATION_CONFIG.enabled;
            const statusBox = document.getElementById('statusBox');

            if (enabled) {
                statusBox.innerHTML = `
                    <div class="success-box">
                        <strong>âœ… è‡ªåŠ¨è¯„ä¼°å·²å¯ç”¨</strong><br>
                        ç¬¦åˆæ¡ä»¶çš„æ¡ˆä¾‹å°†åœ¨æäº¤åè‡ªåŠ¨è¿›è¡ŒAIè¯„ä¼°ã€‚<br>
                        å½“å‰çŠ¶æ€: <span class="status-badge status-enabled">è¿è¡Œä¸­</span>
                    </div>
                `;
            } else {
                statusBox.innerHTML = `
                    <div class="info-box">
                        <strong>â„¹ï¸ è‡ªåŠ¨è¯„ä¼°å·²å…³é—­</strong><br>
                        æ¡ˆä¾‹æäº¤åä¸ä¼šè‡ªåŠ¨è¯„ä¼°ï¼Œéœ€è¦åœ¨<a href="case-evaluation-ai.html">è¯„ä¼°é¡µé¢</a>æ‰‹åŠ¨è§¦å‘ã€‚<br>
                        å½“å‰çŠ¶æ€: <span class="status-badge status-disabled">å·²ç¦ç”¨</span>
                    </div>
                `;
            }
        }

        // ä¿å­˜è®¾ç½®
        function saveSettings() {
            const config = AUTO_EVALUATION_CONFIG;

            // æ”¶é›†è®¾ç½®
            config.enabled = document.getElementById('enabledSwitch').checked;
            
            config.preChecks.minUrlLength = parseInt(document.getElementById('minUrlLength').value);
            config.preChecks.minPromptsLength = parseInt(document.getElementById('minPromptsLength').value);
            config.preChecks.minSummaryLength = parseInt(document.getElementById('minSummaryLength').value);
            config.preChecks.requireVideo = document.getElementById('requireVideo').checked;
            config.preChecks.requireDocument = document.getElementById('requireDocument').checked;
            config.preChecks.blacklistKeywords = document.getElementById('blacklistKeywords').value.split(',').map(k => k.trim());

            config.strategy.delaySeconds = parseInt(document.getElementById('delaySeconds').value);
            config.strategy.maxRetries = parseInt(document.getElementById('maxRetries').value);
            config.strategy.retryIntervalSeconds = parseInt(document.getElementById('retryIntervalSeconds').value);

            // ä¿å­˜åˆ° localStorage
            localStorage.setItem('autoEvaluationConfig', JSON.stringify(config));

            alert('âœ… è®¾ç½®å·²ä¿å­˜ï¼');
        }

        // æ¢å¤é»˜è®¤
        function resetSettings() {
            if (confirm('ç¡®å®šè¦æ¢å¤é»˜è®¤è®¾ç½®å—ï¼Ÿ')) {
                localStorage.removeItem('autoEvaluationConfig');
                localStorage.removeItem('autoEvaluationEnabled');
                location.reload();
            }
        }
    </script>
</body>
</html>
