# 🤖 案例智能评估系统 - 后台逻辑说明

## 📋 评估流程图

```
学生提交案例
    ↓
前置检查（材料完整性）
    ↓
├─ 缺失≥3项 → 直接返回低分（35-50分）+ 具体缺失说明
└─ 材料基本完整 → 调用AI进行深度评估
    ↓
智谱AI分析（基于提示词）
    ↓
返回评估结果（总分 + 6维度 + 优势 + 不足 + 建议）
    ↓
保存到数据库
```

---

## 🔍 第一层：前置严格检查

### 检查项目（5项）

| 检查项 | 规则 | 不通过影响 |
|--------|------|----------|
| **产品链接有效性** | 长度>20字符 且 不含"test" | 材料完整性扣分 |
| **演示视频有效性** | 长度>20字符 且 不含"test" | 材料完整性扣分 |
| **AI提示词充实度** | 字数>100字 | AI协同能力严重扣分 |
| **产品说明充实度** | 字数>200字 | 产品质量严重扣分 |
| **说明文档** | 是否上传 | 加分项缺失 |

### 自动低分机制

```javascript
if (缺失材料数量 >= 3) {
    return {
        totalScore: 35 + (5 - 缺失数) * 5,  // 35-50分
        strengths: ["提交了案例尝试（基础分）"],
        improvements: [
            "【致命问题】产品链接无效或为测试链接",
            "【关键缺失】材料完整性严重不足",
            "【内容质量】提交内容过于简单"
        ],
        suggestions: [
            "【立即行动】提供真实可访问的产品链接",
            "【补充材料】完善所有必需材料",
            "【重新提交】建议补充材料后重新提交"
        ]
    };
}
```

**设计理由**：
- ✅ 避免AI对明显不合格的作业"宽容打分"
- ✅ 快速识别敷衍提交，节省AI调用成本
- ✅ 给学生明确的改进方向

---

## 🧠 第二层：AI深度评估

### 完整提示词结构

```
【角色定义】
你是腾讯HR的专业案例评估专家

【重要约束】⚠️
- 你无法真正访问链接，只能根据文字描述评估
- 如果提示词内容过于简单，必须大幅扣分
- 如果产品说明不详细，无法判断功能质量，必须给予低分
- 评分必须严格，宁可偏严不可偏松

【评估标准】（6个维度，总分100+5）
一、提交材料完整性（20分）
    - 可运行的产品：5分
    - 演示视频：3分
    - 核心AI提示词：4分
    - 测试数据与结果：4分
    - 说明文档：4分

二、产品功能与质量（30分）
    - 核心功能实现：15分
    - AI效果质量：15分

三、AI协同能力（25分）
    - 问题定义能力：8分
    - AI提示词设计：10分
    - 方案判断能力：7分

四、全流程交付能力（15分）
    - 任务拆解：5分
    - 测试验证：5分
    - 问题识别与优化：5分

五、学习能力与创新性（10分）
    - 快速学习能力：5分
    - 创新性：5分

六、文档质量（加分项，最高+5分）
    - 文档结构清晰：+2分
    - 丰富的可视化：+2分
    - 逻辑严密专业：+1分

【学生提交的案例信息】
- 案例名称：${caseData.case_name}
- 产品链接：${caseData.product_url}
  ⚠️ 注意：你无法访问此链接，只能根据其他文字信息推断
- 演示视频：${caseData.video_url}
  ⚠️ 注意：你无法观看视频，只能根据其他文字信息推断
- 核心AI提示词（字数：${caseData.prompts.length}字）：
  ${caseData.prompts}
  ⚠️ 如果内容过于简单，必须严格扣分
- 产品说明（字数：${caseData.summary.length}字）：
  ${caseData.summary}
  ⚠️ 如果内容过于简单，必须严格扣分
- 是否提交说明文档：${caseData.document_url ? '是' : '否'}

【严格评分要求】
1. 提示词<50字或为测试内容 → AI协同能力≤8分（满分25）
2. 产品说明<100字 → 产品质量≤10分（满分30）
3. 链接含test等 → 材料完整性≤10分（满分20）
4. 材料严重不足 → 总分不应超过50分

【输出格式】
严格JSON格式，包含：
- totalScore: 总分
- dimensions: 6个维度的得分和评语
- strengths: 3-5条优势（具体描述）
- improvements: 3-5条不足（具体描述+改进建议）
- suggestions: 3-5条发展建议（可落地的具体建议）
- summary: 一句话总结
```

---

## 💡 发展建议（suggestions）生成逻辑

### AI被要求的建议类型

```json
"suggestions": [
    "建议1：可落地的具体建议",
    "建议2：可落地的具体建议",
    "建议3：可落地的具体建议"
]
```

### AI实际生成的建议结构

根据评估结果，AI会生成以下类型的建议：

#### 1. **立即行动建议**（针对严重问题）
```
示例：
"【立即行动】请提供真实可访问的产品链接，确保产品可以正常使用"
"【立即行动】补充完整的AI提示词设计说明，至少包含问题定义、角色设定、输出格式等关键要素"
```

**触发条件**：
- 产品链接无效
- 提示词过于简单
- 测试数据缺失

#### 2. **材料补充建议**（针对缺失内容）
```
示例：
"【补充材料】完善所有必需材料：有效的演示视频、完整的AI提示词（至少300字）、详细的产品说明（至少500字）"
"【补充材料】增加测试场景的多样性，建议提供至少3组不同类型的测试案例"
```

**触发条件**：
- 材料不完整
- 测试案例不足
- 缺少说明文档

#### 3. **技术优化建议**（针对产品质量）
```
示例：
"【技术优化】优化AI提示词的结构性，建议采用"角色-任务-约束-示例"四段式结构"
"【技术优化】增加错误处理机制，提升产品的鲁棒性"
"【技术优化】改进数据预处理流程，提高AI输出的准确性"
```

**触发条件**：
- AI效果质量一般
- 提示词设计欠佳
- 产品功能不完善

#### 4. **迭代改进建议**（针对全流程能力）
```
示例：
"【迭代改进】建立系统的测试方法论，记录每次优化的前后对比数据"
"【迭代改进】增加A/B测试环节，对比不同提示词版本的效果"
"【迭代改进】建立问题反馈机制，持续收集用户使用中的问题并优化"
```

**触发条件**：
- 缺少迭代优化过程
- 测试验证不充分
- 问题识别能力弱

#### 5. **创新提升建议**（针对学习和创新）
```
示例：
"【创新提升】尝试结合多模态AI（如图像+文本），提升产品的智能化水平"
"【创新提升】参考行业最佳实践，研究类似产品的提示词设计方法"
"【创新提升】探索AI Agent的应用，实现更复杂的业务流程自动化"
```

**触发条件**：
- 创新性不足
- 产品设计常规
- 学习能力体现不明显

---

## 🎯 建议生成的智能逻辑

AI根据以下优先级生成建议：

### 优先级1：致命问题（必须先解决）
```
if (产品链接无效 || 提示词<50字) {
    suggestions[0] = "立即行动建议"
}
```

### 优先级2：关键缺失（影响评分的主要因素）
```
if (材料缺失项≥2) {
    suggestions[1] = "材料补充建议"
}
```

### 优先级3：技术优化（提升产品质量）
```
if (产品质量得分<20/30 || AI协同能力得分<18/25) {
    suggestions[2] = "技术优化建议"
}
```

### 优先级4：流程改进（提升交付能力）
```
if (全流程交付得分<10/15) {
    suggestions[3] = "迭代改进建议"
}
```

### 优先级5：创新建议（锦上添花）
```
if (学习能力与创新性得分<7/10) {
    suggestions[4] = "创新提升建议"
}
```

---

## 🔧 技术参数配置

### 智谱AI调用参数

```javascript
{
    model: 'glm-4-flash',        // 使用GLM-4-Flash模型（速度快，成本低）
    temperature: 0.3,            // 低温度=更严格、更确定的评分
    max_tokens: 3000,            // 最大输出3000字（确保完整的评估报告）
    messages: [{
        role: 'user',
        content: prompt          // 完整的评估提示词
    }]
}
```

**参数说明**：
- **temperature=0.3**：确保评分严格一致，避免随机性
- **max_tokens=3000**：足够输出完整的6维度评估+建议
- **model=glm-4-flash**：成本约￥0.01-0.02/次，速度10-20秒

---

## 📊 评估结果示例

### 高分案例（85分+）

```json
{
  "totalScore": 92,
  "dimensions": {
    "completeness": { "score": 19, "comment": "材料齐全，演示视频质量高" },
    "product": { "score": 28, "comment": "产品功能完整，AI效果优秀" },
    "aiCollaboration": { "score": 23, "comment": "提示词设计专业，有明显迭代优化" },
    "delivery": { "score": 13, "comment": "测试充分，有问题识别和优化" },
    "learning": { "score": 9, "comment": "创新性强，学习路径清晰" }
  },
  "strengths": [
    "【产品质量】核心功能实现完整，AI简历筛选准确率达到90%以上",
    "【提示词设计】采用结构化设计，包含角色、任务、约束、示例四要素",
    "【测试验证】提供了3组不同场景的测试数据，结果详实可信"
  ],
  "improvements": [
    "【文档质量】说明文档可以增加架构图和流程图，提升可读性",
    "【错误处理】建议增加异常情况的处理机制"
  ],
  "suggestions": [
    "【技术优化】可以尝试微调提示词，进一步提升边缘场景的识别准确率",
    "【迭代改进】建立长期的测试数据库，持续优化AI模型表现",
    "【创新提升】探索多轮对话功能，让AI能够澄清模糊信息"
  ],
  "summary": "优秀案例，产品完整度高，AI效果显著，具有较强的工程化思维"
}
```

### 中等案例（60-75分）

```json
{
  "totalScore": 68,
  "dimensions": {
    "completeness": { "score": 16, "comment": "材料基本齐全，但演示视频较简单" },
    "product": { "score": 20, "comment": "核心功能实现，但AI效果一般" },
    "aiCollaboration": { "score": 16, "comment": "提示词基本合理，但缺少迭代" },
    "delivery": { "score": 10, "comment": "测试样本不足，问题识别不充分" },
    "learning": { "score": 6, "comment": "有学习计划，但创新性不足" }
  },
  "suggestions": [
    "【技术优化】优化AI提示词的明确性，增加具体的输出格式要求",
    "【补充材料】增加测试场景至少3组，包含正常、异常、边界情况",
    "【迭代改进】记录提示词的优化过程，展示迭代思维",
    "【创新提升】参考行业最佳实践，提升产品的用户体验"
  ]
}
```

### 低分案例（<50分）

```json
{
  "totalScore": 42,
  "dimensions": {
    "completeness": { "score": 8, "comment": "产品链接无效，提示词过于简单" },
    "product": { "score": 10, "comment": "无法验证产品功能" },
    "aiCollaboration": { "score": 8, "comment": "提示词内容过于简单" }
  },
  "suggestions": [
    "【立即行动】提供真实可访问的产品链接",
    "【补充材料】完善所有必需材料：有效的演示视频、完整的AI提示词（至少300字）、详细的产品说明（至少500字）",
    "【重新提交】建议在完善所有材料后重新提交，当前提交不符合评估要求"
  ]
}
```

---

## 🔒 质量保障机制

### 1. 前置检查（避免垃圾提交）
- ✅ 链接有效性检查
- ✅ 内容充实度检查
- ✅ 自动低分机制

### 2. AI约束（确保评分严格）
- ✅ 明确告知AI无法访问链接
- ✅ 设定严格的扣分规则
- ✅ 要求"宁严勿宽"

### 3. 字数统计（量化判断依据）
- ✅ 提示词字数：${caseData.prompts.length}
- ✅ 产品说明字数：${caseData.summary.length}
- ✅ 让AI基于字数判断内容充实度

### 4. 结构化输出（确保格式一致）
- ✅ 强制JSON格式
- ✅ 6个维度详细评分
- ✅ 分类的优势/不足/建议

---

## 💰 成本与性能

| 指标 | 数据 |
|------|------|
| **单次评估成本** | ￥0.01-0.02 |
| **评估耗时** | 10-20秒 |
| **准确率** | 85%+（需人工复核） |
| **批量处理能力** | 50案例/小时 |

---

## 🎓 优化建议

### 如何提高评估准确性？

1. **添加真实评估案例**
   - 在提示词中加入"参考案例"
   - AI会学习案例的评分标准

2. **调整评分严格度**
   - 修改temperature参数（0.1-0.5）
   - 越低越严格，越高越宽容

3. **人工复核机制**
   - AI评估后，HR人工审核调整
   - 记录调整数据，持续优化提示词

4. **A/B测试**
   - 同一案例用不同提示词评估
   - 对比结果，优化提示词

---

## 📞 常见问题

### Q1: AI给分太高/太低怎么办？
**A**: 调整提示词中的"严格评分要求"部分，或修改temperature参数

### Q2: 如何让AI给出更具体的建议？
**A**: 在提示词中增加"建议必须包含具体的行动步骤、工具、资源"

### Q3: 评估速度慢怎么办？
**A**: 可以切换到glm-4模型（速度更快但成本稍高）

### Q4: 如何批量评估？
**A**: 在代码中增加循环逻辑，依次评估所有"待评估"状态的案例

---

**文档版本**: v1.0  
**最后更新**: 2026年1月3日  
**作者**: AI智能评估系统
